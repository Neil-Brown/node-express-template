doctype html
html(lang="en")
  head
    meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")
    meta(name="Description" content="Node js and Express template")
    title 英検達人
    block css
      link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous")
      link(rel="stylesheet" href="/css/styles.css")
  body
    block header
    block main

    block scripts
      script(src="https://cdn.jsdelivr.net/npm/bootstrap.native@5.1.2/dist/bootstrap-native.min.js" integrity="sha384-fOwVSAAF0y9Wh8ui+19TRYdpVlUhlYP3G11Ixv8A9R10d7d+UqEBovZycdgG3Rcu" crossorigin="anonymous")
      script(nonce=nonce).
        document.addEventListener("DOMContentLoaded", function() {
          var testElement = document.createElement('div');
          testElement.className = 'container'; // Bootstrap class
          document.body.appendChild(testElement);

          // Get computed styles to check if Bootstrap is applied
          var computedStyle = window.getComputedStyle(testElement);
          var isBootstrapLoaded = computedStyle.getPropertyValue('padding-left') !== '0px' &&
                                  computedStyle.getPropertyValue('padding-right') !== '0px' &&
                                  computedStyle.getPropertyValue('width') !== 'auto';  // Checking width property

          // Remove test element
          document.body.removeChild(testElement);

          // If Bootstrap is not loaded, load local fallback CSS
          if (!isBootstrapLoaded) {
            var fallbackCss = document.createElement('link');
            fallbackCss.rel = 'stylesheet';
            fallbackCss.href = '/css/bootstrap-local.css'; // Path to your local CSS file
            document.head.appendChild(fallbackCss);
            console.warn('CDN failed to load. Using local Bootstrap CSS fallback.');
          }

          if (typeof BSN === 'undefined') {
            var fallbackJs = document.createElement('script');
            fallbackJs.src = '/js/bootstrap-local.js'; // Path to your local JS file
            document.body.appendChild(fallbackJs);
            console.warn('CDN JS failed to load. Using local Bootstrap JS fallback.');
          } else {
            console.log('Bootstrap JS loaded successfully from CDN.');
          }
        });
